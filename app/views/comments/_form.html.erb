<%= form_for @comment do |f| %>
   
    <h4><%= f.label "Content" %></h4>
    <%= f.text_field :content %><br>


    <h4>Select your username or create a new one:</h4>
    <%= f.collection_select :user_id, User.all, :id, :username, {include_blank: true} %><br>
    
    <%= f.fields_for :user, User.new do |user| %>
        <%= user.label :username %>
        <%= user.text_field :username %>
    <% end %>
   
<%
=begin%>
    <%= f.collection_select :user_id, User.all, :id, :username, {include_blank: true} %><br>

    <h4>Or create a new one:</h4>
    <%= f.fields_for :user, @comment.user.build do |user_fields| %>
        <%= user_fields.text_field :username %>
    <% end %>
    <%= f.text_field :user_id, list: "users_autocomplete" %>
     <datalist id="users_autocomplete">
        <% User.all.each do |user| %>
            <option value="<%= user. %>"><%= user.username %></option>
        <% end %>
    </datalist>

    <%= f.fields_for :user  do |user_fields| %>
        <%= user_fields.text_field :username %>
    <% end %>
<%
=end%>
    <%= f.submit %>
<% end %>

    